
<script src="js/RegisterView.js"></script>
<script src="js/RegisterService.js"></script>

<div class="container">
	<div class="page-header">
		<h1>Register Manager1</h1>
	</div>
	<div class="easyui-layout" style="width: 100%; height: 508px;">
		<div data-options="region:'west',split:true" title="条目"
			style="width: 30%; padding: 0;">
			<div class="easyui-layout" data-options="fit:true">
				<div data-options="region:'north'"
					style="height: 34px; width: 100%; border: 0; padding: 3px;">
					<input class="easyui-searchbox" style="height: 26px; width: 100%;"
						data-options="prompt:'Please Input Value',searcher:doSearch"></input>
				</div>
				<div data-options="region:'center'" style="border: 0;">
					<ul class="easyui-tree" id="regTree"></ul>
					<!-- <ul class="easyui-tree"
					data-options="url:'../services/register/registerService/findRecords/10/1',method:'get',animate:true"></ul> -->
				</div>
			</div>

		</div>
		<div
			data-options="region:'center',title:'信息',iconCls:'Module-mgr-ico'">
			<div style="margin: 6px 0;">
				<a href="javascript:void(0)" class="easyui-linkbutton btn-primary" data-options="" onclick="loadLocal()"><i class="fa fa-plus"></i> Add Item</a> 
				<a href="javascript:void(0)" class="easyui-linkbutton btn-primary" data-options="" onclick="loadRemote()"><i class="fa fa-save fa-trash-o fa-lg"></i> Save</a> 
				<div class="btn-group actionbtn">
                    <a href="javascript:;" class="btn btn-primary"><i class="fa fa-file-excel-o"></i> 导入导出</a>
                    <a href="javascript:;" data-toggle="dropdown" class="btn btn-primary dropdown-toggle" aria-expanded="false">
                        <span class="fa fa-caret-down"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="javascript:;"><i class="i"></i> 导出Excel</a></li>
                        <li><a href="javascript:;"><i class="i"></i> 下载Excel模板</a></li>
                        <li class="divider"></li>
                        <li><a href="javascript:;"><i class="i"></i> 导入Excel</a></li>
                    </ul>
                </div>
			</div>

			<form id="ff" method="post">
				<table class="myFormTable" cellpadding="5" cellpadding="3"
					cellspacing="3" style="width: 100%">
					<tr>
						<td>名称:</td>
						<td><input class="easyui-textbox" type="text" name="regCode"
							style="width: 80%" data-options="required:true"></input></td>
					</tr>
					<tr>
						<td>显示名称:</td>
						<td><input class="easyui-textbox" type="text" name="regName"
							style="width: 80%" data-options="required:true"></input></td>
					</tr>
					<tr>
						<td>有效状态:</td>
						<td><input class="easyui-textbox" type="text" name="regStatus"
							style="width: 80%" data-options="required:true,validType:'email'"></input></td>
					</tr>
					<tr>
						<td>父节点名称:</td>
						<td><input class="easyui-textbox" type="text"
							name="parentName" style="width: 80%" data-options="required:true"></input></td>
					</tr>
					<tr>
						<td>父路径:</td>
						<td><input class="easyui-textbox" type="text"
							name="parentPath" style="width: 80%" data-options="required:true"></input></td>
					</tr>
					<tr>
						<td>值:</td>
						<td><input class="easyui-textbox" type="text"
							name="regValue" style="width: 80%" data-options="required:true"></input></td>
					</tr>
					<tr>
						<td colspan="2">
							<fieldset>
								<legend>说明</legend>
								<input class="easyui-textbox" name="regDesc"
									style="height: 108px; width: 80%"></input>
							</fieldset>
						</td>
					</tr>
					<tr style="display: none;">
						<td height="10" colspan="2">
							<!-- 隐藏区 --> 
							<input class="easyui-textbox" type="hidden"
							name="regId" /> 
							<input class="easyui-textbox" type="hidden"
							name="parentId" />
						</td>
					</tr>
				</table>
				<div style="text-align: center; padding: 5px">
					<button class="btn btn-success actionbtn" type="button" onclick="submitForm()">
						<i class="fa fa-save"></i> Save
					</button> 
					<button class="btn btn-success actionbtn" type="button" onclick="clearForm()">
						<i class="fa fa-undo"></i> Reset 
					</button>
				</div>
			</form>

		</div>
	</div>
</div>

<div class="modal" id="register_modal">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title"></h4>
			</div>
			<div class="modal-body"></div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary"
					id="register_modal_submit">
					<i class="fa fa-save"></i> Save
				</button>
			</div>
		</div>
	</div>
</div>

<script>
var BASE = '../services/register/registerService/';
	
var initRegTree = function(itemId) {
	var url = BASE + 'findRegisterList';
	if (itemId != undefined) {
		url = url + '/' + regId;
	}else{
		url = url + '/0';
	}
	$('#regTree').tree({
		url : url,
		method : 'get',
		fit : true,
		lines:true,
		checkbox:true,
		idField : 'regId',
		treeField : 'regName',
		formatter:function(node){
			return node.text+'<span style="width:12px;"></span><span>&nbsp;<i class="fa fa-plus"></i></span>';
		},
		onClick: function(node){
			//alert(node.text);  // 在用户点击的时候提示
		},
		onBeforeLoad: function(node, param){
			if (node) {
				alert(node.text);
				$('#regTree').treegrid('options').url = url+"/"+node.id;
			}
		},
		onBeforeExpand : function(row) {
			if (row) {
				$('#regTree').treegrid('options').url = url+"/"+row.id;
			}
		}
	});
}
	
	function doSearch(value) {
		alert('You input: ' + value);
	}

	function loadLocal() {
		$('#ff').form('load', {
			name : 'myname',
			email : 'mymail@gmail.com',
			subject : 'subject',
			message : 'message',
			language : 'en'
		});
	}
	function loadRemote() {
		$('#ff').form('load', 'form_data1.json');
	}
	function clearForm() {
		$('#ff').form('clear');
	}
    filter = function(){
    	$('#regTree').tree({
            //url: ...,
            loadFilter: function(data){
                if (data.d){
                    return data.d;
                } else {
                    return data;
                }
            }
        });
    }
    $(function() {
		initRegTree();
	})
</script>


