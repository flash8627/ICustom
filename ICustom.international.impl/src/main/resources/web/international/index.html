


	<div class="container">
		<div class="page-header">
			<h1>Language Manager</h1>
		</div>
		<div class="panel panel-default">
			<div class="panel-body">
				<form class="form-inline" method="post" id="language_search_form">
					<div class="form-group my-form-row">
						<div class="form-group my-form-group" style="width:48%;">
							<label for="lookupCode" style="">键值:</label>
							<input type="text" class="form-control" style="width:78%;" placeholder="lookup code"
								id="languageCode"> 
						</div>
						
						<div class="form-group my-form-group" style="width:48%;">
							<label for="languageName" style="width:18%;text-align:right;">内容:</label>
								<input type="text" class="form-control" style="width:78%;"
								placeholder="lookup name" id="lookupName">
						</div>
					</div>
					
					<div class="form-group my-form-row">
						<div class="form-group my-form-group" style="width:48%;">
							<label for="lookupCode" style="">备注:</label>
							<input type="text" class="form-control" style="width:78%;" placeholder="lookup code"
								id="languageCode"> 
						</div>
						
						<div class="form-group my-form-group" style="width:48%;">
							<label for="languageName" style="width:18%;text-align:right;">语言:</label>
								<input type="text" class="form-control" style="width:78%;"
								placeholder="lookup name" id="lookupName">
						</div>
					</div>
					
					<div class="form-group my-form-row">
						<label for="startdate" style="width:108px;text-align:right;">创建时间:</label>
						<input type="text" style="width:38%;" class="easyui-datebox" id="startdate" name="startdate"
							data-options="prompt:'请选择开始日期',editable:false,required:'true',onSelect:onSelect"> 
						<span style="width:58px;text-align:center;">&nbsp;
							<i class="fa fa-chevron-right" aria-hidden="true"></i>
							<span class="sr-only">TO</span>
						</span>
						<input type="text"style="width:38%;" class="easyui-datebox" id="enddate" name="enddate"
							data-options="prompt:'请选择结束日期',editable:false,required:'true',disabled:true,validType:'equaldDate[\'#startdate\']'">
					</div>
					
					<script>
						function onSelect(date){  //开始日期选择时触发
							$('#enddate').datebox('enable');	//启用结束日期控件
							$('#enddate').datebox('reset')		//重置结束日期的值
						};
						$.extend($.fn.validatebox.defaults.rules, {
							equaldDate: {
								validator: function(value, param){
									var d1 = $(param[0]).datetimebox('getValue');  //获取开始时间
									return value >=d1;  //有效范围为大于开始时间的日期
								},
							message: '结束日期不能早于开始日期!'
						}
						})
					</script>

					<div class="form-group my-form-group form-search-btn-group my-form-row" style="text-align: center;">
						<button type="submit" class="btn btn-success">
							<i class="fa fa-search"></i> Search 
						</button>
						<button type="submit" class="btn btn-success">
							<i class="fa fa-undo"></i> Reset 
						</button>
					</div>
				</form>
			</div>
		</div>
		<div id="Language_tt" class="easyui-tabs" data-options="tabWidth:118" style="height:360px">
			<div title="国际化">
				<div id="language_list">
					<table width="100%" border="0" cellspacing="1" cellpadding="0" 
						style="border-collapse: collapse;border-spacing: 1;" class="row-table" 
						data-options="
							rownumbers: true,
							url: 'datagrid_data1.json',
							method: 'get',
							onLoadSuccess: onLoadSuccess
						">
					<thead>
					  	<tr>
					        <th data-options="field:'productid',width:120">Item Index</th>
					        <th data-options="field:'itemid',width:180">Item Code <span class="required">*</span></th>
					        <th data-options="field:'listprice',width:110">Value <span class="required">*</span></th>
					        <th data-options="field:'unitcost',width:110">Language <span class="required">*</span></th>
					        <th data-options="field:'attr1',width:120">remarks</th>
					        <th data-options="field:'status',width:120">Create User</th>
					        <th data-options="field:'attr1',width:120">Create Date</th>
					        <th data-options="field:'attr2',width:120">Update User</th>
					        <th data-options="field:'attr3',width:120">Update Date</th>
					      </tr>
					  </thead>
					  <tbody>
					  	<tr>
					        <td>1</td>
					        <td rowspan="2" id="rowspan#index">test.com.label</td>
					        <td>1</td>
					        <td>E</td>
					        <td>DE</td>
					        <td>D</td>
					        <td>1</td>
					        <td>D</td>
					        <td>2</td>
					      </tr>
					      <tr>
					        <td>2</td>
					        <td>2</td>
					        <td>C</td>
					        <td>DE</td>
					        <td>D</td>
					        <td>1</td>
					        <td>D</td>
					        <td>2</td>
					      </tr>
					  </tbody>
				</table>
				<script type="text/javascript">
					
				</script>
				</div>
			</div>
		</div>
	</div>

	<div class="modal" id="language_modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title"></h4>
				</div>
				<div class="modal-body"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary"
						id="language_modal_submit">
						<i class="fa fa-save"></i> Save
					</button>
				</div>
			</div>
		</div>
	</div>

<script type="text/x-handlebars-template"
		id="language_table_template">
    <table class="table table-hover" id="language_table">
            <thead>
                <tr>
    <td>Item Index</td>
    <td>Item Code</td>
    <td>Value</td>
    <td>Language</td>
    <td>Create User</td>
    <td>Create Date</td>
    <td>Update User</td>
    <td>Update Date</td>
  </tr>
            </thead>
            <tbody>
                {{#data}}
                    {{> tr}}
                {{/data}}
            </tbody>
	</table>
</script>

	<script type="text/x-handlebars-template-partial"
		id="language_table_tr_template">
    <tr data-id="{{itemId}}" data-name="{{itemName}}">
        <td>{{itemId}}</td>
        <td>{{itemName}}</td>
        <td>{{url}}</td>
        <td>{{icon}}</td>
        <td>{{leaf}}</td>
        <td>{{orderCode}}</td>
        <td>{{createdUser}}</td>
        <td>{{createdDate}}</td>
        <td>{{updateLastUser}}</td>
        <td>{{updateLastDate}}</td>
        <td>
            <button class="btn btn-xs btn-primary navigation_edit" title="Edit"><i class="fa fa-fw fa-edit"></i></button>
            <button class="btn btn-xs btn-default navigation_delete" title="Delete"><i class="fa fa-fw fa-trash-o"></i></button>
        </td>
    </tr>
</script>

	<script type="text/x-handlebars-template"
		id="language_modal_form_template">
    <form>
        <input type="hidden" id="itemId" value="{{itemId}}">
		<input type="hidden" id="parentId" value="{{parentId}}">
        <div class="form-group">
            <label for="itemName">名称:</label>
            <input type="text" value="{{itemName}}" class="form-control" id="itemName">
        </div>
        <div class="form-group">
            <label for="url">地址:</label>
            <input type="text" value="{{url}}" class="form-control" id="url">
        </div>
        <div class="form-group">
            <div class="form-group">
            	<label for="orderCode">排序码:</label>
            	<input type="text" value="{{orderCode}}" class="form-control" id="orderCode">
        	</div>
            <div class="form-group">
            	<label for="icon">小图标:</label>
            	<input type="text" value="{{icon}}" class="form-control" id="icon">
        	</div>
        </div>
    </form>
</script>

	<script src="js/LanguageView.js"></script>
	<script src="js/LanguageService.js"></script>

	<script>
		$(function() {
			
			$('#Language_tt').tabs({
				plain: true
			})
			
			// 显示所有产品
			//$('body').hide(); // 隐藏界面
			LanguageService.findLanguages(function() {
				$('body').show(); // 显示界面
			});

			// 根据关键字查询产品
			$('#language_search_form').on('submit', function() {
				var keyword = $('#keyword').val().trim();
				LanguageService.findLanguagesByName(keyword);
				return false;
			});

			// 点击 Edit 按钮，弹出编辑产品对话框
			$(document).on('click', '#language_table .navigation_edit',
					function() {
						var $tr = $(this).closest('tr');
						var itemId = $tr.data('id');
						LanguageService.findLanguageById(itemId);
						$('#language_modal').modal('show');
						return false;
					});

			// 点击 Delete 按钮，删除产品
			$(document).on(
					'click',
					'#language_table .navigation_delete',
					function() {
						var $tr = $(this).closest('tr');
						var itemId = $tr.data('id');
						var name = $tr.data('name');
						console.warn(itemId, name);
						if (confirm('Do you want to delete this navigation? ['
								+ name + ']')) {
							LanguageService.deleteLanguageById(itemId);
						}
						return false;
					});

			// 点击 Create 按钮，弹出创建产品对话框
			$('#language_create').on('click', function() {
				var title = 'Create Language';
				var navigation = {
					itemId : 0,
					itemName : '',
					orderCode : '',
					icon : '',
					url : ''
				};
				LanguageView.renderLanguageModal(title, navigation);
				$('#language_modal').modal('show');
			});

			// 点击对话框中的 Save 按钮，创建或更新产品
			$('#language_modal_submit').on('click', function() {
				var id = $('#itemId').val();
				var navigation = {
					itemId : id,
					parentId : $('#parentId').val().trim(),
					itemName : $('#itemName').val().trim(),
					orderCode : $('#orderCode').val().trim(),
					icon : $('#icon').val().trim(),
					url : $('#url').val().trim()
				};
				console.warn(id, navigation);
				if (id == 0) {
					LanguageService.createLanguage(navigation);
				} else {
					LanguageService.updateLanguage(navigation);
				}
				$('#language_modal').modal('hide');
			});
			//
		});
	</script>
	
<style type="text/css">
.row-table{background:#666;}
.row-table tr th {background:#F1F2F8;height:36px;color:#666;font-weight: bold;text-indent: 6px;}
.row-table tbody tr td {background:#FFF;text-indent: 6px;}
.required{color:#F00;}
.row-table table, .row-table td {
	margin: 0;
	padding: 0;
	vertical-align: middle;
	text-align:left;
}
.row-table tbody{
	border-top: 1px solid #BBB;
	border-left: 1px solid #BBB;
}
.row-table tbody td {
	background-color: #DFC;
	border-bottom: 1px solid #BBB;
	border-right: 1px solid #BBB;
	padding: 9px;
}
.row-table td {
	font-weight: bold;
	padding: 4px 8px 6px 9px;
	text-align:center;
}
.row-table thead th {
	font-size: 14px;
	font-weight: bold;
	line-height: 19px;
	padding: 0 8px 2px;
	text-align:center;
}

	.tabs-title{width:138px;}
</style>

